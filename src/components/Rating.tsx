import './Rating.css'
import {useState} from "react";

interface IRatingProps {
    numberStars: number
    onStarPick: (value: number) => void
}

export function Rating({numberStars, onStarPick}: IRatingProps) {
    const [rating, setRating] = useState<number | null>(null)
    const [hover, setHover] = useState<number | null>(null)
    const handleChange = (currentRating: number) => {
        onStarPick(currentRating || 0)
    }

    return (
        <div className='star-container'>
            {[...Array(numberStars)].map((_, index) => {
                const currentRating = index + 1;
                return (
                    <label key={index}>
                        <input className='star-input' name="rating" value={currentRating} type="radio"
                               onClick={() => setRating(currentRating)} onChange={() => handleChange(currentRating)}/>
                        <svg className={'svg-elem'} onMouseEnter={() => setHover(currentRating)}
                             onMouseLeave={() => setHover(null)} xmlns="http://www.w3.org/2000/svg" width="58"
                             height="58" viewBox={currentRating <= (hover || rating) ? "0 0 58 58" : "-5 -5 58 58"}
                             fill="none">
                            <path
                                d={currentRating <= (hover || rating) ?
                                    "M53.7633 22.1805C53.5762 21.5863 53.2155 21.0616 52.7278 20.674C52.2401 20.2864 51.6475 20.0536 51.0264 20.0055L37.555 18.841C37.4735 18.833 37.3958 18.803 37.3299 18.7544C37.2641 18.7057 37.2127 18.6401 37.1812 18.5646L31.9181 6.02205C31.6744 5.44988 31.2678 4.96199 30.749 4.61906C30.2301 4.27613 29.6219 4.09329 29 4.09329C28.3781 4.09329 27.7699 4.27613 27.251 4.61906C26.7322 4.96199 26.3256 5.44988 26.0819 6.02205L20.8188 18.5646C20.7873 18.6401 20.7359 18.7057 20.6701 18.7544C20.6042 18.803 20.5265 18.833 20.445 18.841L6.97359 20.0055C6.35246 20.0536 5.75992 20.2864 5.27219 20.674C4.78445 21.0616 4.42384 21.5863 4.23672 22.1805C4.03854 22.7756 4.02123 23.416 4.18697 24.0209C4.35272 24.6258 4.69407 25.168 5.16789 25.5789L15.3881 34.4942C15.4507 34.5497 15.4972 34.6211 15.5227 34.7009C15.5482 34.7806 15.5518 34.8657 15.5331 34.9473L12.4609 48.2035C12.3177 48.8138 12.3586 49.4529 12.5783 50.04C12.7981 50.6271 13.1869 51.1359 13.6957 51.5022C14.1966 51.8718 14.7967 52.0827 15.4187 52.1077C16.0406 52.1328 16.6558 51.9708 17.1848 51.6427L28.7644 44.6192C28.8324 44.5771 28.9109 44.5548 28.9909 44.5548C29.071 44.5548 29.1494 44.5771 29.2175 44.6192L40.7971 51.6427C41.3316 51.9699 41.951 52.1315 42.5772 52.107C43.2034 52.0825 43.8083 51.8731 44.3156 51.5052C44.8228 51.1373 45.2098 50.6273 45.4275 50.0397C45.6453 49.4521 45.6841 48.8131 45.5391 48.2035L42.4759 34.9428C42.4573 34.8612 42.4609 34.7761 42.4864 34.6963C42.5119 34.6166 42.5584 34.5452 42.6209 34.4896L52.8412 25.5744C53.3125 25.1628 53.6516 24.6209 53.8157 24.0169C53.9798 23.413 53.9615 22.7741 53.7633 22.1805Z"
                                    :
                                    "M49.7633 18.1805C49.5762 17.5863 49.2155 17.0616 48.7278 16.674C48.2401 16.2864 47.6475 16.0536 47.0264 16.0055L33.555 14.841C33.4735 14.8329 33.3958 14.803 33.3299 14.7544C33.2641 14.7057 33.2127 14.6401 33.1812 14.5646L27.9181 2.02205C27.6744 1.44988 27.2678 0.961987 26.749 0.619057C26.2301 0.276127 25.6219 0.0932922 25 0.0932922C24.3781 0.0932922 23.7699 0.276127 23.251 0.619057C22.7322 0.961987 22.3256 1.44988 22.0819 2.02205L16.8188 14.5646C16.7873 14.6401 16.7359 14.7057 16.6701 14.7544C16.6042 14.803 16.5265 14.8329 16.445 14.841L2.97359 16.0055C2.35246 16.0536 1.75992 16.2864 1.27219 16.674C0.784454 17.0616 0.423836 17.5863 0.236718 18.1805C0.0385426 18.7756 0.0212318 19.416 0.186974 20.0209C0.352716 20.6258 0.694071 21.168 1.16789 21.5789L11.3881 30.4942C11.4507 30.5497 11.4972 30.6211 11.5227 30.7009C11.5482 30.7806 11.5518 30.8657 11.5331 30.9473L8.46094 44.2035C8.31773 44.8138 8.35858 45.4529 8.57835 46.04C8.79812 46.6271 9.18693 47.1359 9.6957 47.5022C10.1966 47.8718 10.7967 48.0827 11.4187 48.1077C12.0406 48.1328 12.6558 47.9708 13.1848 47.6427L24.7644 40.6192C24.8324 40.5771 24.9109 40.5548 24.9909 40.5548C25.071 40.5548 25.1494 40.5771 25.2175 40.6192L36.7971 47.6427C37.3316 47.9699 37.951 48.1315 38.5772 48.107C39.2034 48.0825 39.8083 47.8731 40.3156 47.5052C40.8228 47.1372 41.2098 46.6273 41.4275 46.0397C41.6453 45.4521 41.6841 44.8131 41.5391 44.2035L38.4759 30.9428C38.4573 30.8612 38.4609 30.776 38.4864 30.6963C38.5119 30.6166 38.5584 30.5452 38.6209 30.4896L48.8412 21.5744C49.3125 21.1627 49.6516 20.6209 49.8157 20.0169C49.9798 19.413 49.9615 18.7741 49.7633 18.1805ZM47.0445 19.5217L36.8243 28.437C36.3888 28.8159 36.065 29.3065 35.8877 29.8558C35.7105 30.4052 35.6865 30.9925 35.8184 31.5545L38.8815 44.8152C38.9041 44.9043 38.8991 44.9982 38.8672 45.0843C38.8352 45.1705 38.7778 45.245 38.7025 45.2978C38.6344 45.3523 38.5506 45.3837 38.4634 45.3874C38.3762 45.391 38.2901 45.3668 38.2177 45.3181L26.638 38.2947C26.1444 37.9946 25.5777 37.8359 25 37.8359C24.4223 37.8359 23.8556 37.9946 23.3619 38.2947L11.7823 45.3181C11.7099 45.3668 11.6238 45.391 11.5366 45.3874C11.4494 45.3837 11.3656 45.3523 11.2975 45.2978C11.2222 45.245 11.1648 45.1705 11.1328 45.0843C11.1009 44.9982 11.0959 44.9043 11.1185 44.8152L14.1816 31.5545C14.3135 30.9925 14.2895 30.4052 14.1123 29.8558C13.935 29.3065 13.6112 28.8159 13.1757 28.437L2.95547 19.5217C2.88557 19.4623 2.83537 19.383 2.8115 19.2944C2.78763 19.2058 2.79122 19.1121 2.8218 19.0256C2.84468 18.9394 2.89429 18.8627 2.96349 18.8066C3.0327 18.7504 3.11794 18.7176 3.20695 18.7129L16.6806 17.5484C17.2574 17.4992 17.8098 17.2932 18.2779 16.9525C18.7459 16.6118 19.1118 16.1496 19.3359 15.6158L24.599 3.0733C24.6356 2.99546 24.6936 2.92963 24.7662 2.88353C24.8388 2.83742 24.923 2.81294 25.0091 2.81294C25.0951 2.81294 25.1793 2.83742 25.2519 2.88353C25.3246 2.92963 25.3825 2.99546 25.4191 3.0733L30.6641 15.6158C30.8874 16.1483 31.252 16.6097 31.7183 16.9503C32.1846 17.2908 32.7351 17.4976 33.3103 17.5484L46.784 18.7129C46.873 18.7176 46.9582 18.7504 47.0274 18.8066C47.0966 18.8627 47.1463 18.9394 47.1691 19.0256C47.2008 19.1112 47.2058 19.2044 47.1836 19.2929C47.1613 19.3815 47.1129 19.4612 47.0445 19.5217Z"
                                }
                                fill="#F3EE66"
                            />
                        </svg>
                    </label>
                )
            })}
        </div>
    )
}